<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invigilation Duty Allocation - SmartGenEduX</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <img src="../assets/Invigilation Duty Allocation_20250621_132356_0000_1751087212459.png" alt="Invigilation Duty" class="w-12 h-12 mr-4">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Invigilation Duty Allocation</h1>
                        <p class="text-gray-600">Smart teacher allocation for exam supervision</p>
                    </div>
                </div>
                <button onclick="window.close()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
            <div class="bg-blue-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-calendar-check text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">12</div>
                        <div class="text-blue-100">Active Exams</div>
                    </div>
                </div>
            </div>
            <div class="bg-green-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-chalkboard-teacher text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">45</div>
                        <div class="text-green-100">Available Teachers</div>
                    </div>
                </div>
            </div>
            <div class="bg-purple-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-users text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">156</div>
                        <div class="text-purple-100">Duties Assigned</div>
                    </div>
                </div>
            </div>
            <div class="bg-orange-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-balance-scale text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">3.5</div>
                        <div class="text-orange-100">Avg Duties/Teacher</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Duty Assignment -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">Create Duty Assignment</h2>
                <form id="dutyForm" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Exam Date</label>
                            <input type="date" id="examDate" class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Exam Type</label>
                            <select id="examType" class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Type</option>
                                <option value="unit_test">Unit Test</option>
                                <option value="monthly">Monthly Exam</option>
                                <option value="quarterly">Quarterly</option>
                                <option value="half_yearly">Half Yearly</option>
                                <option value="annual">Annual</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Start Time</label>
                            <input type="time" id="startTime" value="09:00" class="w-full border rounded px-3 py-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">End Time</label>
                            <input type="time" id="endTime" value="12:00" class="w-full border rounded px-3 py-2">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Exam Halls</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2" value="hall1"> Hall 1 (40 seats)
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2" value="hall2"> Hall 2 (35 seats)
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2" value="hall3"> Hall 3 (30 seats)
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2" value="hall4"> Hall 4 (25 seats)
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Teachers per Hall</label>
                        <select id="teachersPerHall" class="w-full border rounded px-3 py-2">
                            <option value="2">2 Teachers</option>
                            <option value="3">3 Teachers</option>
                            <option value="4">4 Teachers</option>
                        </select>
                    </div>

                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
                            <i class="fas fa-plus mr-2"></i>Create Assignment
                        </button>
                        <button type="button" onclick="autoAssign()" class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700">
                            <i class="fas fa-magic mr-2"></i>Auto Assign
                        </button>
                    </div>
                </form>
            </div>

            <!-- Teacher Availability -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">Teacher Availability</h2>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-medium">Filter by Department:</span>
                        <select id="deptFilter" class="border rounded px-3 py-2 text-sm">
                            <option value="">All Departments</option>
                            <option value="math">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="social">Social Studies</option>
                        </select>
                    </div>
                    
                    <div class="max-h-96 overflow-y-auto">
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-3 border rounded">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-blue-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-semibold">Dr. Rajesh Kumar</div>
                                        <div class="text-sm text-gray-600">Mathematics • 3 duties this month</div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs mr-2">Available</span>
                                    <input type="checkbox" class="teacher-select" value="rajesh_kumar">
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 border rounded">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-pink-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-semibold">Mrs. Priya Sharma</div>
                                        <div class="text-sm text-gray-600">English • 2 duties this month</div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs mr-2">Available</span>
                                    <input type="checkbox" class="teacher-select" value="priya_sharma">
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 border rounded">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-green-600"></i>
                                    </div>
                                    <div>
                                        <div class="font-semibold">Mr. Amit Patel</div>
                                        <div class="text-sm text-gray-600">Science • 4 duties this month</div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs mr-2">On Leave</span>
                                    <input type="checkbox" class="teacher-select" value="amit_patel" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <button onclick="bulkAssign()" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">
                            <i class="fas fa-users mr-2"></i>Assign Selected Teachers
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Current Assignments -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Current Exam Assignments</h2>
                <div class="flex space-x-2">
                    <button onclick="exportSchedule()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                        <i class="fas fa-download mr-2"></i>Export
                    </button>
                    <button onclick="sendNotifications()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        <i class="fas fa-bell mr-2"></i>Notify Teachers
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left">Date</th>
                            <th class="px-4 py-2 text-left">Time</th>
                            <th class="px-4 py-2 text-left">Exam</th>
                            <th class="px-4 py-2 text-left">Hall</th>
                            <th class="px-4 py-2 text-left">Assigned Teachers</th>
                            <th class="px-4 py-2 text-left">Status</th>
                            <th class="px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-t">
                            <td class="px-4 py-2">Jan 5, 2025</td>
                            <td class="px-4 py-2">09:00 - 12:00</td>
                            <td class="px-4 py-2">Mathematics - Half Yearly</td>
                            <td class="px-4 py-2">Hall 1</td>
                            <td class="px-4 py-2">
                                <div class="flex -space-x-2">
                                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs" title="Dr. Rajesh Kumar">R</div>
                                    <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs" title="Mrs. Priya Sharma">P</div>
                                </div>
                            </td>
                            <td class="px-4 py-2">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">Confirmed</span>
                            </td>
                            <td class="px-4 py-2">
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-800" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-600 hover:text-red-800" title="Cancel">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t">
                            <td class="px-4 py-2">Jan 6, 2025</td>
                            <td class="px-4 py-2">09:00 - 12:00</td>
                            <td class="px-4 py-2">Science - Half Yearly</td>
                            <td class="px-4 py-2">Hall 2</td>
                            <td class="px-4 py-2">
                                <div class="flex -space-x-2">
                                    <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs" title="Mr. Suresh Nair">S</div>
                                    <div class="w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center text-white text-xs" title="Ms. Kavita Singh">K</div>
                                </div>
                            </td>
                            <td class="px-4 py-2">
                                <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs">Pending</span>
                            </td>
                            <td class="px-4 py-2">
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-800" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-600 hover:text-red-800" title="Cancel">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('dutyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createAssignment();
        });

        function createAssignment() {
            const examDate = document.getElementById('examDate').value;
            const examType = document.getElementById('examType').value;
            
            if (!examDate || !examType) {
                showMessage('Please fill all required fields', 'error');
                return;
            }
            
            const btn = document.querySelector('#dutyForm button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Creating...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showMessage('Duty assignment created successfully!', 'success');
                document.getElementById('dutyForm').reset();
            }, 2000);
        }

        function autoAssign() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Auto Assigning...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showMessage('Teachers automatically assigned based on availability and workload balance!', 'success');
            }, 3000);
        }

        function bulkAssign() {
            const selectedTeachers = document.querySelectorAll('.teacher-select:checked');
            if (selectedTeachers.length === 0) {
                showMessage('Please select at least one teacher', 'error');
                return;
            }
            
            showMessage(`${selectedTeachers.length} teachers assigned to duties`, 'success');
        }

        function exportSchedule() {
            showMessage('Invigilation schedule exported successfully', 'success');
        }

        function sendNotifications() {
            showMessage('Notifications sent to all assigned teachers', 'info');
        }

        function showMessage(message, type) {
            const colors = {
                'success': 'bg-green-600',
                'error': 'bg-red-600',
                'info': 'bg-blue-600'
            };
            
            const icons = {
                'success': 'fas fa-check',
                'error': 'fas fa-exclamation-triangle',
                'info': 'fas fa-info-circle'
            };
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
            messageDiv.innerHTML = `<i class="${icons[type]} mr-2"></i>${message}`;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>