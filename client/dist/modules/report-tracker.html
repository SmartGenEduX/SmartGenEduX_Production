<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Tracker - SmartGenEduX</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <img src="../assets/reporttracker.png" alt="Report Tracker" class="w-12 h-12 mr-4">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Smart Report Tracker</h1>
                        <p class="text-gray-600">Automated report generation with WhatsApp integration</p>
                    </div>
                </div>
                <button onclick="window.close()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>

        <!-- Dashboard Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
            <div class="bg-blue-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-file-alt text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">247</div>
                        <div class="text-blue-100">Reports Generated</div>
                    </div>
                </div>
            </div>
            <div class="bg-green-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fab fa-whatsapp text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">1,234</div>
                        <div class="text-green-100">WhatsApp Sent</div>
                    </div>
                </div>
            </div>
            <div class="bg-purple-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-chart-line text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">78.5%</div>
                        <div class="text-purple-100">Avg Performance</div>
                    </div>
                </div>
            </div>
            <div class="bg-orange-600 text-white rounded-lg p-6">
                <div class="flex items-center">
                    <i class="fas fa-clock text-3xl mr-4"></i>
                    <div>
                        <div class="text-2xl font-bold">95%</div>
                        <div class="text-orange-100">On-Time Reports</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <!-- Generate Report -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">Generate New Report</h2>
                <form id="reportForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Report Type</label>
                        <select id="reportType" class="w-full border rounded px-3 py-2" required>
                            <option value="">Select Report Type</option>
                            <option value="attendance">Attendance Report</option>
                            <option value="marks">Marks Report</option>
                            <option value="behavior">Behavior Report</option>
                            <option value="fee">Fee Report</option>
                            <option value="monthly">Monthly Summary</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Class</label>
                            <select id="reportClass" class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Class</option>
                                <option value="1">Class 1</option>
                                <option value="2">Class 2</option>
                                <option value="3">Class 3</option>
                                <option value="4">Class 4</option>
                                <option value="5">Class 5</option>
                                <option value="all">All Classes</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Subject</label>
                            <select id="reportSubject" class="w-full border rounded px-3 py-2">
                                <option value="">All Subjects</option>
                                <option value="english">English</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="social">Social Studies</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">From Date</label>
                            <input type="date" id="fromDate" class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">To Date</label>
                            <input type="date" id="toDate" class="w-full border rounded px-3 py-2" required>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
                            <i class="fas fa-file-alt mr-2"></i>Generate Report
                        </button>
                        <button type="button" onclick="generateAndSend()" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">
                            <i class="fab fa-whatsapp mr-2"></i>Generate & Send WhatsApp
                        </button>
                    </div>
                </form>
            </div>

            <!-- WhatsApp Bulk Send -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">WhatsApp Bulk Reports</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Select Recipients</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2"> All Class 5 Parents
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2"> Fee Defaulters Only
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2"> Low Attendance Students
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2"> Custom List
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Message Template</label>
                        <select id="whatsappTemplate" class="w-full border rounded px-3 py-2">
                            <option>Monthly Progress Report</option>
                            <option>Attendance Alert</option>
                            <option>Fee Reminder</option>
                            <option>Parent-Teacher Meeting</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Schedule Delivery</label>
                        <div class="grid grid-cols-2 gap-2">
                            <input type="date" class="border rounded px-3 py-2">
                            <input type="time" class="border rounded px-3 py-2">
                        </div>
                    </div>
                    
                    <button onclick="sendBulkWhatsApp()" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">
                        <i class="fab fa-whatsapp mr-2"></i>Send Bulk WhatsApp (125 Recipients)
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Reports -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Recent Reports</h2>
                <div class="flex space-x-2">
                    <select id="filterStatus" class="border rounded px-3 py-2">
                        <option value="">All Status</option>
                        <option value="generated">Generated</option>
                        <option value="sent">Sent</option>
                        <option value="scheduled">Scheduled</option>
                    </select>
                    <button onclick="exportReports()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        <i class="fas fa-download mr-2"></i>Export
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left">Report ID</th>
                            <th class="px-4 py-2 text-left">Type</th>
                            <th class="px-4 py-2 text-left">Class/Subject</th>
                            <th class="px-4 py-2 text-left">Generated</th>
                            <th class="px-4 py-2 text-left">WhatsApp Status</th>
                            <th class="px-4 py-2 text-left">Recipients</th>
                            <th class="px-4 py-2 text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-t">
                            <td class="px-4 py-2">#RPT-2025-001</td>
                            <td class="px-4 py-2">Monthly Summary</td>
                            <td class="px-4 py-2">Class 5 - All Subjects</td>
                            <td class="px-4 py-2">Jan 4, 2025 14:30</td>
                            <td class="px-4 py-2">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Sent (125/125)</span>
                            </td>
                            <td class="px-4 py-2">125 Parents</td>
                            <td class="px-4 py-2">
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-800" title="View Report">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-green-600 hover:text-green-800" title="Download PDF">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="text-purple-600 hover:text-purple-800" title="WhatsApp Status">
                                        <i class="fab fa-whatsapp"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t">
                            <td class="px-4 py-2">#RPT-2025-002</td>
                            <td class="px-4 py-2">Attendance Report</td>
                            <td class="px-4 py-2">Class 3 - Mathematics</td>
                            <td class="px-4 py-2">Jan 4, 2025 11:15</td>
                            <td class="px-4 py-2">
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Scheduled</span>
                            </td>
                            <td class="px-4 py-2">42 Parents</td>
                            <td class="px-4 py-2">
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-800" title="View Report">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-green-600 hover:text-green-800" title="Download PDF">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="text-orange-600 hover:text-orange-800" title="Edit Schedule">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr class="border-t">
                            <td class="px-4 py-2">#RPT-2025-003</td>
                            <td class="px-4 py-2">Fee Report</td>
                            <td class="px-4 py-2">All Classes</td>
                            <td class="px-4 py-2">Jan 3, 2025 16:45</td>
                            <td class="px-4 py-2">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Sent (89/89)</span>
                            </td>
                            <td class="px-4 py-2">89 Parents</td>
                            <td class="px-4 py-2">
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-800" title="View Report">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-green-600 hover:text-green-800" title="Download PDF">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="text-purple-600 hover:text-purple-800" title="Resend WhatsApp">
                                        <i class="fab fa-whatsapp"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Report generation
        document.getElementById('reportForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                type: document.getElementById('reportType').value,
                class: document.getElementById('reportClass').value,
                subject: document.getElementById('reportSubject').value,
                fromDate: document.getElementById('fromDate').value,
                toDate: document.getElementById('toDate').value
            };
            
            generateReport(formData);
        });

        function generateReport(data) {
            // Show loading
            const submitBtn = document.querySelector('#reportForm button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generating...';
            submitBtn.disabled = true;
            
            // Simulate report generation
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
                // Show success message
                showMessage('Report generated successfully!', 'success');
                
                // Reset form
                document.getElementById('reportForm').reset();
            }, 3000);
        }

        function generateAndSend() {
            const formData = {
                type: document.getElementById('reportType').value,
                class: document.getElementById('reportClass').value,
                subject: document.getElementById('reportSubject').value,
                fromDate: document.getElementById('fromDate').value,
                toDate: document.getElementById('toDate').value
            };
            
            if (!formData.type || !formData.class || !formData.fromDate || !formData.toDate) {
                showMessage('Please fill all required fields', 'error');
                return;
            }
            
            // Show loading
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generating & Sending...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showMessage('Report generated and sent via WhatsApp!', 'success');
                document.getElementById('reportForm').reset();
            }, 4000);
        }

        function sendBulkWhatsApp() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                showMessage('Bulk WhatsApp messages sent successfully!', 'success');
            }, 3000);
        }

        function exportReports() {
            showMessage('Reports exported to Excel file', 'success');
        }

        function showMessage(message, type) {
            const className = type === 'success' ? 'bg-green-600' : 'bg-red-600';
            const icon = type === 'success' ? 'fas fa-check' : 'fas fa-exclamation-triangle';
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 right-4 ${className} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
            messageDiv.innerHTML = `<i class="${icon} mr-2"></i>${message}`;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>